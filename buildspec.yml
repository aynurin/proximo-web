version: 0.2

proxy:
    upload-artifacts: yes
    logs: yes
            
phases:
  install:
    commands:
      - curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash - && sudo apt-get install -y nodejs
      - curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add - && echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list && sudo apt update && sudo apt install yarn
      - node --version
      - sudo npm install -g aurelia-cli
  build:
    commands:
      - yarn
      - au test
      - yarn run analyze
      - yarn run build
      - aws s3 sync ./dist s3://proximo-web-blue
reports:
  report-name-or-arn:
    files:
      - location
      - location
    base-directory: location
    discard-paths: yes
    file-format: JunitXml | CucumberJson | VisualStudioTrx | TestNGXml
artifacts:
  files:
    - ./dist
  name: artifact-name
  discard-paths: no
  base-directory: ./dist

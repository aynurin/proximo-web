<template ref="htmlElement">
    <table class="accounts-summary table table-sm">
        <thead>
            <tr>
                <th scope="col">Account</th>
                <th scope="col">&nbsp;</th>
                <th scope="col" repeat.for="month of months">${monthName(month)}</th>
                <th scope="col">Ending</th>
            </tr>
        </thead>
        <tbody repeat.for="acc of accountsByMonth">
            <tr>
                <th scope="row" rowspan="4"><div class="label">${acc.key.friendlyName}</div></th>
                <td><div class="label label-sm" title="Minimal balance during the period">min</div></td>
                <td repeat.for="month of months" class="${tryGet(month, acc, t => accountCSS(t))}">
                    <div class="money" title="${'Minimum balance in ' + monthName(month)}">${tryGet(month, acc, t => t.low[0].accountBalance) | textToMoney}</div>
                </td>
                <td rowspan="4"><div class="money">${acc.endingBalance | textToMoney}</div></td>
            </tr>
            <tr>
                <td><div class="label label-sm" title="Ending balance for the period">end</div></td>
                <td repeat.for="month of months" class="${tryGet(month, acc, t => accountCSS(t))}">
                    <div class="money" title="${monthName(month) + ' ending balance'}">${tryGet(month, acc, t => t.last.accountBalance) | textToMoney}</div>
                </td>
            </tr>
            <tr>
                <td><div class="label label-sm" title="How much money was spent during the period">spent</div></td>
                <td repeat.for="month of months" class="${tryGet(month, acc, t => accountCSS(t))}">
                    <div class="money" title="${'Spent in ' + monthName(month)}">${tryGet(month, totalsByMonth, t => t.totals[0]) | textToMoney}</div>
                </td>
            </tr>
            <tr>
                <td><div class="label label-sm" title="How much money was deposited during the period">earned</div></td>
                <td repeat.for="month of months" class="${tryGet(month, acc, t => accountCSS(t))}">
                    <div class="money" title="${'Deposited in ' + monthName(month)}">${tryGet(month, totalsByMonth, t => t.totals[1]) | textToMoney}</div>
                </td>
            </tr>
        </tbody>
        <tbody if.bind="accountsByMonth.length > 1">
            <tr>
                <th scope="row" rowspan="4"><div class="label">Monthly totals:</div></th>
                <td><div class="label label-sm">min</div></td>
                <td repeat.for="month of months" class="${tryGet(month, totalsByMonth, t => accountCSS(t))}">
                    <div class="money">${tryGet(month, totalsByMonth, t => t.low[0].accountBalance) | textToMoney}</div>
                </td>
                <td rowspan="4"><div class="money">${totals.endingBalance | textToMoney}</div></td>
            </tr>
            <tr>
                <td><div class="label label-sm">end</div></td>
                <td repeat.for="month of months" class="${tryGet(month, totalsByMonth, t => accountCSS(t))}">
                  <div class="money">${tryGet(month, totalsByMonth, t => t.last.accountBalance) | textToMoney}</div>
                </td>
            </tr>
            <tr>
                <td><div class="label label-sm">spent</div></td>
                <td repeat.for="month of months" class="${tryGet(month, totalsByMonth, t => accountCSS(t))}">
                  <div class="money">${tryGet(month, totalsByMonth, t => t.totals[0]) | textToMoney}</div>
                </td>
            </tr>
            <tr>
                <td><div class="label label-sm">earned</div></td>
                <td repeat.for="month of months" class="${tryGet(month, totalsByMonth, t => accountCSS(t))}">
                  <div class="money">${tryGet(month, totalsByMonth, t => t.totals[1]) | textToMoney}</div>
                </td>
            </tr>
        </tbody>
    </table>
</template>
